<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>防災診断ツール</title>

<style>
.tool-wrapper {
  width: 100%;
  max-width: 100%;
  font-family: sans-serif;
  padding: 15px;
  box-sizing: border-box;
  container-type: inline-size;
}

/* ===== 選択肢 ===== */

.selection-container {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  margin-bottom: 20px;
}

.selection-group {
  flex: 1 1 100%;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.selection-group span {
  font-weight: bold;
  margin-bottom: 6px;
}

/* ===== 診断結果 ===== */

#result {
  margin-top: 20px;
}

#result strong {
  display: block;
  margin-top: 12px;
}

#result .items {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  margin-top: 8px;
  margin-bottom: 18px;
}

#result .items div {
  width: 100%;
  box-sizing: border-box;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 6px;
  background: #f8f8f8;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 14px;
}

/* ===== 横幅600px以上で2列 ===== */

@container (min-width: 600px) {

  .selection-group {
    flex: 1 1 calc(50% - 10px);
  }

  #result .items div {
    width: calc(50% - 8px);
  }

}
</style>
</head>

<body>

<div class="tool-wrapper">

<h3>あなたに必要な防災グッズ診断</h3>

<div class="selection-container">

  <div class="selection-group">
    <span>あなたの地域</span>
    <label><input type="checkbox" value="sea"> 海が近い</label>
    <label><input type="checkbox" value="mountain"> 山が近い</label>
    <label><input type="checkbox" value="volcano"> 火山が近い</label>
    <label><input type="checkbox" value="city"> 都市部</label>
    <label><input type="checkbox" value="river"> 川が近い</label>
  </div>

  <div class="selection-group">
    <span>あなたの家族構成</span>
    <label><input type="checkbox" value="male"> 男性がいる</label>
    <label><input type="checkbox" value="female"> 女性がいる</label>
    <label><input type="checkbox" value="child"> 子供がいる</label>
    <label><input type="checkbox" value="elder"> 高齢者がいる</label>
    <label><input type="checkbox" value="baby"> 赤ちゃんがいる</label>
  </div>

  <div class="selection-group">
    <span>汎用防災グッズ</span>
    <label><input type="checkbox" value="generic"> 必要な汎用防災グッズ</label>
  </div>

  <div class="selection-group">
    <span>通販サイトリンク</span>
    <label><input type="checkbox" id="showAmazon" checked> Amazon表示</label>
    <label><input type="checkbox" id="showRakuten" checked> 楽天表示</label>
    <label><input type="checkbox" id="showYahoo" checked> Yahoo表示</label>
  </div>

</div>

<button id="checkBtn">診断する</button>

<div id="result"></div>

</div>

<script>
const amazonAffiliateId = "あなたのAmazonID";
const rakutenAffiliateId = "あなたの楽天ID";
const yahooAffiliateId = "あなたのYahooID";

document.getElementById("checkBtn").addEventListener("click", function() {

  const checked = document.querySelectorAll("input[type=checkbox]:checked");
  const result = document.getElementById("result");

  if (checked.length === 0) {
    result.innerHTML = "選択してください。";
    return;
  }

  const showAmazon = document.getElementById("showAmazon").checked;
  const showRakuten = document.getElementById("showRakuten").checked;
  const showYahoo = document.getElementById("showYahoo").checked;

  let itemsHtml = "";

  checked.forEach(function(chk){
    let itemList = [];

    if(chk.value === "sea") itemList = ["防水リュック","ライフジャケット","防水スマホケース","防水ブーツ"];
    if(chk.value === "mountain") itemList = ["ヘルメット","登山靴","ロープ"];
    if(chk.value === "volcano") itemList = ["防塵マスク","ゴーグル","耐火手袋"];
    if(chk.value === "city") itemList = ["携帯トイレ","防犯ブザー"];
    if(chk.value === "river") itemList = ["ライフジャケット","防水ライト"];

    if(chk.value === "male") itemList = ["軽量非常食"];
    if(chk.value === "female") itemList = ["衛生用品"];
    if(chk.value === "child") itemList = ["子供用救急セット"];
    if(chk.value === "elder") itemList = ["服薬セット"];
    if(chk.value === "baby") itemList = ["おむつ","粉ミルク"];

    if(chk.value === "generic") itemList = ["飲料水3日分","保存食","懐中電灯","モバイルバッテリー","非常用トイレ"];

    if(itemList.length > 0){
      itemsHtml += "<strong>" + chk.parentNode.textContent.trim() + "</strong>";
      itemsHtml += "<div class='items'>";
      itemList.forEach(function(it){
        let html = it + "<span>";
        if(showAmazon) html += '<a href="https://www.amazon.co.jp/s?k='+encodeURIComponent(it)+'&tag='+amazonAffiliateId+'" target="_blank"><img src="https://www.amazon.co.jp/favicon.ico"></a>';
        if(showRakuten) html += '<a href="https://search.rakuten.co.jp/search/mall/'+encodeURIComponent(it)+'/?f=af_id='+rakutenAffiliateId+'" target="_blank"><img src="https://www.rakuten.co.jp/favicon.ico"></a>';
        if(showYahoo) html += '<a href="https://shopping.yahoo.co.jp/search?p='+encodeURIComponent(it)+'&sc_i='+yahooAffiliateId+'" target="_blank"><img src="https://shopping.yahoo.co.jp/favicon.ico"></a>';
        html += "</span>";
        itemsHtml += "<div>"+html+"</div>";
      });
      itemsHtml += "</div>";
    }

  });

  result.innerHTML = itemsHtml;

});
</script>

</body>
</html>


