<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>防災診断ツール</title>
<style>
body { font-family: sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; }
h3 { margin-top: 0; }
button { margin-top: 10px; padding: 5px 10px; }
#result { 
  margin-top: 15px; 
  font-weight: bold; 
  min-height: 50px; 
}

/* 選択肢横並び */
.selection-row { display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 10px; }
.selection-group { display: flex; align-items: center; gap: 5px; }

/* 防災グッズ2列表示・左寄せ・枠あり・背景あり */
#result .items {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 5px;
  margin-bottom: 10px;
}
#result .items div {
  flex: 1 1 calc(50% - 10px); /* 2列で均等幅 */
  box-sizing: border-box;
  padding: 5px;
  border: 1px solid #ccc; 
  border-radius: 5px;
  background-color: #f9f9f9; 
  display: flex;
  justify-content: space-between; 
  align-items: center;
  font-size: 0.9em;
}
#result .items div img {
  width: 16px;
  height: 16px;
  margin-left: 3px;
}
</style>
</head>
<body>

<h3>あなたに必要な防災グッズ診断</h3>

<div class="selection-row">
  <div class="selection-group">
    <span>地域：</span>
    <label><input type="checkbox" value="sea"> 海が近い</label>
    <label><input type="checkbox" value="mountain"> 山が近い</label>
    <label><input type="checkbox" value="volcano"> 火山が近い</label>
    <label><input type="checkbox" value="city"> 都市部</label>
  </div>
  <div class="selection-group">
    <span>家族構成：</span>
    <label><input type="checkbox" value="male"> 男性</label>
    <label><input type="checkbox" value="female"> 女性</label>
    <label><input type="checkbox" value="child"> 子供</label>
    <label><input type="checkbox" value="elder"> 高齢者</label>
  </div>
</div>

<div class="selection-group">
  <span>汎用防災グッズ：</span>
  <label><input type="checkbox" value="generic"> 必要な汎用防災グッズ</label>
</div>

<button id="checkBtn">診断する</button>

<div id="result"></div>

<script>
// アフィリエイトID
const amazonAffiliateId = "あなたのAmazonID";
const rakutenAffiliateId = "あなたの楽天ID";
const yahooAffiliateId = "あなたのYahooID";

document.getElementById("checkBtn").addEventListener("click", function() {
  var checked = document.querySelectorAll("input[type=checkbox]:checked");
  var result = document.getElementById("result");

  if (checked.length === 0) {
    result.innerHTML = "選択してください。";
    return;
  }

  var score = checked.length * 25;
  var level = "";
  if (score <= 25) level = "リスク：低";
  else if (score <= 50) level = "リスク：中";
  else level = "リスク：高";

  var itemsHtml = "";

  checked.forEach(function(chk){
    var itemList = [];

    // 地域別
    if(chk.value === "sea") itemList = ["防水リュック","ライフジャケット","救命浮き具","防水ブーツ","防水スマホケース","浮き輪・ロープ","非常食","飲料水3日分","携帯ラジオ","防水ライト"];
    if(chk.value === "mountain") itemList = ["ヘルメット","懐中電灯","登山靴・防滑ブーツ","ロープ","簡易担架","地図・コンパス","登山用防寒着"];
    if(chk.value === "volcano") itemList = ["防塵マスク","耐火手袋","ゴーグル","耐熱服・長袖長ズボン","長靴・防水シューズ","ヘルメット"];
    if(chk.value === "city") itemList = ["携帯トイレ","防犯ブザー","簡易マスク","小型救急キット","水筒","折りたたみスツール"];

    // 家族構成別
    if(chk.value === "male") itemList = ["軽量非常食","1人用寝袋","コンパクトラジオ"];
    if(chk.value === "female") itemList = ["軽量非常食","化粧品小物","コンパクトラジオ"];
    if(chk.value === "child") itemList = ["子供用救急セット","乳幼児用食料","おむつ","抱っこ紐"];
    if(chk.value === "elder") itemList = ["杖対応靴","服薬セット","補助具","軽量椅子"];

    // 汎用
    if(chk.value === "generic") itemList = ["飲料水3日分","保存食","懐中電灯","予備電池","モバイルバッテリー","非常用トイレ","簡易寝袋・毛布","笛","マスク","手袋","ラジオ","簡易寝袋・毛布","救急セット","防寒具","帽子","エマージェンシーシート"];

    if(itemList.length > 0){
      itemsHtml += "<strong>"+ chk.parentNode.textContent +"</strong>";
      itemsHtml += "<div class='items'>";
      itemList.forEach(function(it){
        var amazonURL = "https://www.amazon.co.jp/s?k=" + encodeURIComponent(it) + "&tag=" + amazonAffiliateId;
        var rakutenURL = "https://search.rakuten.co.jp/search/mall/" + encodeURIComponent(it) + "/?f=af_id=" + rakutenAffiliateId;
        var yahooURL = "https://shopping.yahoo.co.jp/search?p=" + encodeURIComponent(it) + "&sc_i=" + yahooAffiliateId;

        itemsHtml += "<div>" + it +
          '<span>' +
          '<a href="' + amazonURL + '" target="_blank"><img src="https://www.amazon.co.jp/favicon.ico" alt="Amazon"></a>' +
          '<a href="' + rakutenURL + '" target="_blank"><img src="https://www.rakuten.co.jp/favicon.ico" alt="楽天"></a>' +
          '<a href="' + yahooURL + '" target="_blank"><img src="https://shopping.yahoo.co.jp/favicon.ico" alt="Yahoo"></a>' +
          '</span></div>';
      });
      itemsHtml += "</div>";
    }
  });

  result.innerHTML =
    "<h4>防災リスクスコア：" + score + "点</h4>" +
    "<strong>" + level + "</strong><br>" +
    itemsHtml;
});
</script>

</body>
</html>
